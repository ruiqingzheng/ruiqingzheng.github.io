<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>url的三个js编码函数escape(),encodeURI(),encodeURIComponent()简介 | 工作笔记</title>
    <meta name="description" content="Hendry的博客">
    <link rel="icon" href="/img/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.eecf6a6a.css" as="style"><link rel="preload" href="/assets/js/app.f8bee57c.js" as="script"><link rel="preload" href="/assets/js/33.ec53f96d.js" as="script"><link rel="prefetch" href="/assets/js/10.837bbfd0.js"><link rel="prefetch" href="/assets/js/11.bbd08110.js"><link rel="prefetch" href="/assets/js/12.eb514b46.js"><link rel="prefetch" href="/assets/js/13.e2503408.js"><link rel="prefetch" href="/assets/js/14.d97c0ac2.js"><link rel="prefetch" href="/assets/js/15.baf7986f.js"><link rel="prefetch" href="/assets/js/16.2b12bf6f.js"><link rel="prefetch" href="/assets/js/17.f7e545ac.js"><link rel="prefetch" href="/assets/js/18.70d9230d.js"><link rel="prefetch" href="/assets/js/19.0a61e7ba.js"><link rel="prefetch" href="/assets/js/2.d139c70a.js"><link rel="prefetch" href="/assets/js/20.87141f48.js"><link rel="prefetch" href="/assets/js/21.536e6d3b.js"><link rel="prefetch" href="/assets/js/22.fa3e648a.js"><link rel="prefetch" href="/assets/js/23.f6c367b9.js"><link rel="prefetch" href="/assets/js/24.a8f770f5.js"><link rel="prefetch" href="/assets/js/25.3bb8bbfc.js"><link rel="prefetch" href="/assets/js/26.1c16cfb8.js"><link rel="prefetch" href="/assets/js/27.075df559.js"><link rel="prefetch" href="/assets/js/28.90c1e366.js"><link rel="prefetch" href="/assets/js/29.3145e78e.js"><link rel="prefetch" href="/assets/js/3.de89ea98.js"><link rel="prefetch" href="/assets/js/30.9832e5bd.js"><link rel="prefetch" href="/assets/js/31.2f9a7c5b.js"><link rel="prefetch" href="/assets/js/32.df9181b5.js"><link rel="prefetch" href="/assets/js/34.398a7128.js"><link rel="prefetch" href="/assets/js/35.bb1c5a48.js"><link rel="prefetch" href="/assets/js/36.935a5449.js"><link rel="prefetch" href="/assets/js/37.459fef35.js"><link rel="prefetch" href="/assets/js/38.f51023c1.js"><link rel="prefetch" href="/assets/js/39.ed9f7023.js"><link rel="prefetch" href="/assets/js/4.a889cc83.js"><link rel="prefetch" href="/assets/js/40.7959ecc5.js"><link rel="prefetch" href="/assets/js/41.2f350c5b.js"><link rel="prefetch" href="/assets/js/42.3a09f5a5.js"><link rel="prefetch" href="/assets/js/43.b22e3395.js"><link rel="prefetch" href="/assets/js/44.ea91f873.js"><link rel="prefetch" href="/assets/js/45.29363c9f.js"><link rel="prefetch" href="/assets/js/46.45848afe.js"><link rel="prefetch" href="/assets/js/47.309f8db5.js"><link rel="prefetch" href="/assets/js/48.4da217ee.js"><link rel="prefetch" href="/assets/js/49.713e67fd.js"><link rel="prefetch" href="/assets/js/5.7183a5fb.js"><link rel="prefetch" href="/assets/js/50.d90574c6.js"><link rel="prefetch" href="/assets/js/51.5190cc6c.js"><link rel="prefetch" href="/assets/js/52.25c37497.js"><link rel="prefetch" href="/assets/js/53.3fea90a3.js"><link rel="prefetch" href="/assets/js/54.d23ad054.js"><link rel="prefetch" href="/assets/js/55.d8ba3a31.js"><link rel="prefetch" href="/assets/js/56.bc578093.js"><link rel="prefetch" href="/assets/js/57.cb8c611e.js"><link rel="prefetch" href="/assets/js/58.4a6efece.js"><link rel="prefetch" href="/assets/js/59.397f12f2.js"><link rel="prefetch" href="/assets/js/6.6621a9ba.js"><link rel="prefetch" href="/assets/js/60.a209bb60.js"><link rel="prefetch" href="/assets/js/61.0a1b1f3b.js"><link rel="prefetch" href="/assets/js/62.a79409e9.js"><link rel="prefetch" href="/assets/js/63.f99fda12.js"><link rel="prefetch" href="/assets/js/64.59a96a9c.js"><link rel="prefetch" href="/assets/js/65.ab4be186.js"><link rel="prefetch" href="/assets/js/66.df4455cd.js"><link rel="prefetch" href="/assets/js/7.a024304b.js"><link rel="prefetch" href="/assets/js/8.be16c405.js"><link rel="prefetch" href="/assets/js/9.37e77487.js">
    <link rel="stylesheet" href="/assets/css/0.styles.eecf6a6a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">工作笔记</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/menu.html" class="nav-link">首页</a></div><div class="nav-item"><a href="/Android/" class="nav-link">Android</a></div><div class="nav-item"><a href="/直播/" class="nav-link">直播</a></div><div class="nav-item"><a href="/前端/" class="nav-link">前端</a></div><div class="nav-item"><a href="/公众号/" class="nav-link">公众号</a></div><div class="nav-item"><a href="/项目/" class="nav-link">项目</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">高级</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>算法</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/language/chinese.html" class="nav-link">冒泡</a></li><li class="dropdown-subitem"><a href="/language/japanese.html" class="nav-link">快速</a></li></ul></li><li class="dropdown-item"><h4>设计模式</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/language/chinese.html" class="nav-link">工厂</a></li><li class="dropdown-subitem"><a href="/language/chinese.html" class="nav-link">单例</a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/menu.html" class="nav-link">首页</a></div><div class="nav-item"><a href="/Android/" class="nav-link">Android</a></div><div class="nav-item"><a href="/直播/" class="nav-link">直播</a></div><div class="nav-item"><a href="/前端/" class="nav-link">前端</a></div><div class="nav-item"><a href="/公众号/" class="nav-link">公众号</a></div><div class="nav-item"><a href="/项目/" class="nav-link">项目</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">高级</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>算法</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/language/chinese.html" class="nav-link">冒泡</a></li><li class="dropdown-subitem"><a href="/language/japanese.html" class="nav-link">快速</a></li></ul></li><li class="dropdown-item"><h4>设计模式</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/language/chinese.html" class="nav-link">工厂</a></li><li class="dropdown-subitem"><a href="/language/chinese.html" class="nav-link">单例</a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>url的三个js编码函数escape(),encodeURI(),encodeURIComponent()简介</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/%E5%89%8D%E7%AB%AF/url%E7%9A%84%E4%B8%89%E4%B8%AAjs%E7%BC%96%E7%A0%81%E5%87%BD%E6%95%B0escape()%2CencodeURI()%2CencodeURIComponent()%E7%AE%80%E4%BB%8B.html#引子" class="sidebar-link">引子</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/%E5%89%8D%E7%AB%AF/url%E7%9A%84%E4%B8%89%E4%B8%AAjs%E7%BC%96%E7%A0%81%E5%87%BD%E6%95%B0escape()%2CencodeURI()%2CencodeURIComponent()%E7%AE%80%E4%BB%8B.html#为啥会有浏览器编码这一说法" class="sidebar-link">为啥会有浏览器编码这一说法</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/%E5%89%8D%E7%AB%AF/url%E7%9A%84%E4%B8%89%E4%B8%AAjs%E7%BC%96%E7%A0%81%E5%87%BD%E6%95%B0escape()%2CencodeURI()%2CencodeURIComponent()%E7%AE%80%E4%BB%8B.html#出现浏览器编码的几种情况" class="sidebar-link">出现浏览器编码的几种情况</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/%E5%89%8D%E7%AB%AF/url%E7%9A%84%E4%B8%89%E4%B8%AAjs%E7%BC%96%E7%A0%81%E5%87%BD%E6%95%B0escape()%2CencodeURI()%2CencodeURIComponent()%E7%AE%80%E4%BB%8B.html#浏览器编码的函数简介escape-encodeuri-encodeuricomponent" class="sidebar-link">浏览器编码的函数简介escape(),encodeURI(),encodeURIComponent()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/%E5%89%8D%E7%AB%AF/url%E7%9A%84%E4%B8%89%E4%B8%AAjs%E7%BC%96%E7%A0%81%E5%87%BD%E6%95%B0escape()%2CencodeURI()%2CencodeURIComponent()%E7%AE%80%E4%BB%8B.html#总结" class="sidebar-link">总结</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="url的三个js编码函数escape-encodeuri-encodeuricomponent-简介"><a href="#url的三个js编码函数escape-encodeuri-encodeuricomponent-简介" aria-hidden="true" class="header-anchor">#</a> url的三个js编码函数escape(),encodeURI(),encodeURIComponent()简介</h1> <p>2014年10月12日 108460次浏览</p> <h2 id="引子"><a href="#引子" aria-hidden="true" class="header-anchor">#</a> 引子</h2> <p>浏览器URl地址，上网一定会用到，但是浏览器地址有中文或者浏览器url参数操作的时候，经常会用到encodeURIComponent()和decodeURIComponent()以及encodeURI()等等。关于浏览器参数操作，请看文章http://www.haorooms.com/post/js_url_canshu ，今天主要讲讲escape(),encodeURI(),encodeURIComponent()这几个函数的用法和区别。</p> <h2 id="为啥会有浏览器编码这一说法"><a href="#为啥会有浏览器编码这一说法" aria-hidden="true" class="header-anchor">#</a> 为啥会有浏览器编码这一说法</h2> <p>一般来说，URL只能使用英文字母、阿拉伯数字和某些标点符号，不能使用其他文字和符号。比如，世界上有英文字母的网址 “h ttp://www.haorooms.com”， 但是没有希腊字母的网址“h ttp://www.aβγ.com” （读作阿尔法-贝塔-伽玛.com）。这是因为网络标准RFC 1738做了硬性规定：</p> <div class="language- extra-class"><pre class="language-text"><code>原文：&quot;...Only alphanumerics [0-9a-zA-Z], the special characters &quot;$-_.+!*'(),&quot; [not including the quotes - ed], and reserved characters used for their reserved purposes may be used unencoded within a URL.&quot;
</code></pre></div><blockquote><p>翻译：“只有字母和数字[0-9a-zA-Z]、一些特殊符号“$-_.+!*'(),”[不包括双引号]、以及某些保留字，才可以不经过编码直接用于URL。”</p></blockquote> <p>这意味着，如果URL中有汉字，就必须编码后使用。但是麻烦的是，RFC 1738没有规定具体的编码方法，而是交给应用程序（浏览器）自己决定。这导致“URL编码”成为了一个混乱的领域。</p> <p>下面我们通过介绍escape(),encodeURI(),encodeURIComponent()来说说Javascript浏览器编码方法。</p> <h2 id="出现浏览器编码的几种情况"><a href="#出现浏览器编码的几种情况" aria-hidden="true" class="header-anchor">#</a> 出现浏览器编码的几种情况</h2> <p><strong>1、网址路径中包含汉字</strong></p> <p>如下图：</p> <p><img src="https://www.haorooms.com/uploads/images/urlbm.jpg" alt="enter image description here"></p> <p>h ttp://www.haorooms.com/您好， 在浏览器中显示的是 h ttp://www.haorooms.com/%E6%82%A8%E5%A5%BD 自动对“你好”进行了编码。要是我们浏览器地址中有中文的时候，就要用到url编码了。</p> <p><strong>2、查询字符串包含汉字</strong></p> <div class="language- extra-class"><pre class="language-text"><code>http://www.haorooms.com/search?keywords=您好
</code></pre></div><p>这样包含查询的的条件的时候，汉字也会被编码。</p> <p><strong>3、Get方法生成的URL包含汉字</strong></p> <p>前面说的是直接输入网址的情况，但是更常见的情况是，在已打开的网页上，直接用Get或Post方法发出HTTP请求。</p> <p>根据台湾中兴大学吕瑞麟老师的试验，这时的编码方法由网页的编码决定，也就是由HTML源码中字符集的设定决定。</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html;charset=xxxx&quot;&gt;
</code></pre></div><p>如果上面这一行最后的charset是UTF-8，则URL就以UTF-8编码；如果是GB2312，URL就以GB2312编码。</p> <p>举例来说，百度是GB2312编码，Google是UTF-8编码。因此，从它们的搜索框中搜索同一个词“春节”，生成的查询字符串是不一样的。</p> <p>百度生成的是%B4%BA%BD%DA，这是GB2312编码。Google生成的是%E6%98%A5%E8%8A%82，这是UTF-8编码。所以，结论3就是，GET和POST方法的编码，用的是网页的编码。</p> <p><strong>4、Ajax调用的URL包含汉字</strong></p> <p>前面三种情况都是由浏览器发出HTTP请求，最后一种情况则是由Javascript生成HTTP请求，也就是Ajax调用。还是根据吕瑞麟老师的文章，在这种情况下，IE和Firefox的处理方式完全不一样。</p> <p>举例来说，有这样两行代码：</p> <div class="language- extra-class"><pre class="language-text"><code>url = url + &quot;?q=&quot; +document.myform.elements[0].value; // 假定用户在表单中提交的值是“春节”这两个字

http_request.open('GET', url, true);
</code></pre></div><p>那么，无论网页使用什么字符集，IE传送给服务器的总是“q=%B4%BA%BD%DA”，而Firefox传送给服务器的总是“q=%E6%98%A5%E8%8A%82”。也就是说，在Ajax调用中，IE总是采用GB2312编码（操作系统的默认编码），而Firefox总是采用utf-8编码。</p> <h2 id="浏览器编码的函数简介escape-encodeuri-encodeuricomponent"><a href="#浏览器编码的函数简介escape-encodeuri-encodeuricomponent" aria-hidden="true" class="header-anchor">#</a> 浏览器编码的函数简介escape(),encodeURI(),encodeURIComponent()</h2> <p><strong>1、escape()</strong></p> <p>escape()是js编码函数中最古老的一个。虽然这个函数现在已经不提倡使用了，但是由于历史原因，很多地方还在使用它，所以有必要先从它讲起。</p> <p>实际上，escape()不能直接用于URL编码，它的真正作用是返回一个字符的Unicode编码值。比如“春节”的返回结果是%u6625%u8282，也就是说在Unicode字符集中，“春”是第6625个（十六进制）字符，“节”是第8282个（十六进制）字符。</p> <p>例如：</p> <div class="language- extra-class"><pre class="language-text"><code>javascript:escape(&quot;春节&quot;);
//输出 &quot;%u6625%u8282&quot;

javascript:escape(&quot;hello word&quot;);
//输出 &quot;hello%20word&quot;
</code></pre></div><p>还有两个地方需要注意。</p> <p><strong>首先</strong>，无论网页的原始编码是什么，一旦被Javascript编码，就都变为unicode字符。也就是说，Javascipt函数的输入和输出，默认都是Unicode字符。这一点对下面两个函数也适用。</p> <div class="language- extra-class"><pre class="language-text"><code> javascript:escape(&quot;\u6625\u8282&quot;);
//输出 &quot;%u6625%u8282&quot;

 javascript:unescape(&quot;%u6625%u8282&quot;);
//输出 &quot;春节&quot;

 javascript:unescape(&quot;\u6625\u8282&quot;);
//输出 &quot;春节&quot;
</code></pre></div><p><strong>其次</strong>，escape()不对“+”编码。但是我们知道，网页在提交表单的时候，如果有空格，则会被转化为+字符。服务器处理数据的时候，会把+号处理成空格。所以，使用的时候要小心。</p> <p><strong>2、encodeURI()</strong></p> <p>它着眼于对整个URL进行编码，因此除了常见的符号以外，对其他一些在网址中有特殊含义的符号“; / ? : @ &amp; = + $ , #”，也不进行编码。编码后，它输出符号的utf-8形式，并且在每个字节前加上%。</p> <p><img src="https://www.haorooms.com/uploads/images/url1.jpg" alt="enter image description here"></p> <p>它对应的解码函数是decodeURI()。</p> <p><img src="https://www.haorooms.com/uploads/images/url2.jpg" alt="enter image description here"></p> <p>需要注意的是，它不对单引号'编码。</p> <p><strong>3、encodeURIComponent()</strong></p> <p>最后一个Javascript编码函数是encodeURIComponent()。与encodeURI()的区别是，它用于对URL的组成部分进行个别编码，而不用于对整个URL进行编码。</p> <p>因此，“; / ? : @ &amp; = + $ , #”，这些在encodeURI()中不被编码的符号，在encodeURIComponent()中统统会被编码。至于具体的编码方法，两者是一样。</p> <p><img src="https://www.haorooms.com/uploads/images/url3.jpg" alt="enter image description here"></p> <p>它对应的解码函数是decodeURIComponent()。</p> <p>encodeURIComponent()相比encodeURI()要更加彻底。</p> <p>例如：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;html&gt;
&lt;body&gt;

&lt;script type=&quot;text/javascript&quot;&gt;

var test1=&quot;http://www.haorooms.com/My first/&quot;;
var nn=encodeURI(test1);
var now=decodeURI(test1);


var test1=&quot;http://www.haorooms.com/My first/&quot;;
var bb=encodeURIComponent(test1);
var nnow=decodeURIComponent(bb);

&lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre></div><p>输出结果是：</p> <div class="language- extra-class"><pre class="language-text"><code>http://www.haorooms.com/My%20first/
http://www.haorooms.com/My first/
http%3A%2F%2Fwww.haorooms.com%2FMy%20first%2F
http://www.haorooms.com/My first/
</code></pre></div><h2 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h2> <p>escape()不能直接用于URL编码，它的真正作用是返回一个字符的Unicode编码值。比如&quot;春节&quot;的返回结果是%u6625%u8282，，escape()不对&quot;+&quot;编码 主要用于汉字编码，现在已经不提倡使用。</p> <p>encodeURI()是Javascript中真正用来对URL编码的函数。 编码整个url地址，但对特殊含义的符号&quot;; / ? : @ &amp; = + $ , #&quot;，也不进行编码。对应的解码函数是：decodeURI()。</p> <p>encodeURIComponent() 能编码&quot;; / ? : @ &amp; = + $ , #&quot;这些特殊字符。对应的解码函数是decodeURIComponent()。</p> <p>假如要传递带&amp;符号的网址，所以用encodeURIComponent()</p> <p>https://www.haorooms.com/post/js_escape_encodeURIComponent</p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.f8bee57c.js" defer></script><script src="/assets/js/33.ec53f96d.js" defer></script>
  </body>
</html>
