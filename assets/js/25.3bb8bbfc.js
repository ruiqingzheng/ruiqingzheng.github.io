(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{191:function(t,e,i){"use strict";i.r(e);var r=i(0),s=Object(r.a)({},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),i("p",[t._v("慕课网 vue 核心技术中的 eslint 章节\nreact 文档: "),i("a",{attrs:{href:"https://facebook.github.io/create-react-app/docs/setting-up-your-editor",target:"_blank",rel:"noopener noreferrer"}},[t._v("配置 ide"),i("OutboundLink")],1),t._v("\neslint 基础 http://www.cnblogs.com/yzg1/p/6282791.html\neditorconfig http://www.cnblogs.com/xiyangbaixue/p/4201490.html\nprettier https://prettier.io/")]),t._v(" "),t._m(2),t._v(" "),i("p",[t._v("eslint -- 定制代码规则\neditorconfig -- 帮助开发人员定义和维护一致的编码风格在不同的编辑器和 IDE\nprettier -- 代码格式化")]),t._v(" "),i("p",[t._v("editorconfig\n一般如果这个项目没有配置 eslint 的话, 也就是没有规范化代码的规则的时候, 才会使用 editorconfig, 在 idea 下默认的快捷是 opt + cmd + l")]),t._v(" "),i("p",[t._v("prettier 是专注于格式化代码, 而且还可以根据 eslint 规则来格式化代码")]),t._v(" "),i("p",[t._v("但 eslint 也可以调用插件, 然后\n当代码风格不符合规则, 这几种工具都能通过配置来实现自动修复的功能")]),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),i("p",[t._v("// Format a file on save. A formatter must be available, the file must not be saved after delay, and the editor must not be shutting down.")]),t._v(" "),i("p",[t._v('"editor.formatOnSave": true,')]),t._v(" "),i("p",[t._v("表示使用配置的 formatter 来格式化代码, 于是在 vscode 中, 需要安装 prettier 插件, 然后再配置, prettier 使用 eslint 规则")]),t._v(" "),i("p",[t._v('"prettier.eslintIntegration": true,')]),t._v(" "),i("p",[t._v("这样就可以在保存的时候格式化代码了")]),t._v(" "),t._m(6),t._v(" "),i("p",[t._v("但是... eslint 也有格式化的功能, 比如在 vs code 中安装了 eslint 插件后 , 可以配置")]),t._v(" "),i("p",[t._v('"eslint.autoFixOnSave": true,')]),t._v(" "),i("p",[t._v("这两种方法都可以格式化, 但我一般用 prettier 更多 , 因为 prettier 可以格式化很多其他格式的代码, 比如 json 文件, 还有其他格式的文件")]),t._v(" "),i("p",[t._v("而且 这两个都开启为 true 发现一般都是用的是 prettier 生效")]),t._v(" "),t._m(7),t._v(" "),i("p",[t._v("https://prettier.io/docs/en/webstorm.html")]),t._v(" "),t._m(8),t._v(" "),i("p",[t._v("filewatcher 结合 prettier 使用")]),t._v(" "),t._m(9),t._v(" "),i("p",[t._v("那么这个是 prettier 规则的格式化代码, 而不是 eslint 规则, 所以 intellij 中不推荐使用,")]),t._v(" "),i("p",[t._v("而在 vscode 中推荐使用 prettier , 因为它使用 eslint 规则很方便而且支持多种文件格式")]),t._v(" "),t._m(10),t._v(" "),i("p",[t._v("但 intellij 中还有个 reformate code , 它默认用的是 editorconfig 配置文件 快捷键是 opt + cmd + l")]),t._v(" "),i("p",[t._v("如果有 filewatcher + prettier 同时存在的话, 那么 editorconfig 可能和 prettier 规则冲突")]),t._v(" "),i("p",[t._v("包括 intellij 的自动补全( shift + cmd + 回车 )")]),t._v(" "),i("p",[t._v("在自动补全后, 会自动保存, 而在保存前又要去调用 prettier , 所以即使有冲突但最终使用的是 prettier")]),t._v(" "),i("p",[t._v("一般情况下如果没有 eslint 的情况下, 那么才使用这个 opt + cmd + l 来 reformate code")]),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),i("p",[t._v("但需要注意的是, 要开启该功能才能使用, 而且该项目本身是有安装 eslint 依赖且配置了 eslint 配置文件 ,")]),t._v(" "),i("p",[t._v("eslint 配置文件可以是单独的 eslintrc 这样的文件, 也可以是 package.json 中的 eslintConfig 字段")]),t._v(" "),i("p",[t._v("然后每个项目都需要手动去开启,在设置中搜索 eslint -> enable 即可")]),t._v(" "),t._m(13),t._v(" "),i("p",[t._v("在 react 项目中使用 eslint , create-react-app 创建的项目 eject 后可见依赖包中是有安装 eslint 还有相关的规则配置的")]),t._v(" "),t._m(14),t._v(" "),i("p",[t._v("推荐使用该方式, 虽然不是保存时候自动修复问题, 但是使用快捷键修复也已经是很方便了, 而且使用的是 eslint 规则来修复, 符合我们的需求")]),t._v(" "),i("p",[t._v("包括补全符号啊, 这些都可以修复")]),t._v(" "),t._m(15),t._v(" "),i("p",[t._v("另外 react 官方推荐的是使用 prettier 来实现自动修复,")]),t._v(" "),i("p",[t._v("但解决方案是和 git 关联的, 在文件提交前那么就调用 prettier")]),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),i("p",[t._v("使用 eslint 的时候 比如 html 等等都不能很好的格式化, 而 prettier 可以格式化更多文件格式")]),t._v(" "),i("p",[t._v("比如格式化 html 还可以格式话 markdown 文件")]),t._v(" "),i("p",[t._v("全局安装 sudo yarn global add prettier")]),t._v(" "),i("p",[t._v("/usr/local/lib/node_modules/prettier")]),t._v(" "),i("p",[t._v("然后在 ide 的设置中设置 prettier 所在路径")]),t._v(" "),i("p",[t._v("修改快捷键, 默认是三个键的组合快捷很不方便, 改成 opt + p")]),t._v(" "),i("p",[t._v("而我们前面有提到使用 eslint 自动修复的快捷是 opt + l")]),t._v(" "),i("p",[t._v("这两个快捷就比较一致好记了,")]),t._v(" "),i("p",[t._v("当需要使用 prettier 就是 opt + p")]),t._v(" "),i("p",[t._v("当需要使用 eslint 那么久是 opt + l")]),t._v(" "),i("p",[t._v("使用编辑器的规则就是 opt + cmd + l")]),t._v(" "),t._m(18),t._v(" "),i("p",[t._v("目前看来最好的方式还是在 ide 中保存的时候就调用 eslint 规则来进行修复")]),t._v(" "),i("p",[t._v("只要项目中配置了 eslint 依赖和配置文件, 然后打开 intellij 的 eslint fix 功能 , 结合快捷键还是很方便的")]),t._v(" "),i("p",[t._v("而在 vscode 中, 则使用 prettier 集成 eslint 规则也很方便")]),t._v(" "),t._m(19),t._v(" "),i("p",[t._v("[已解决 2019-08-25]1. 报错: ESLint: TypeError: this.cliEngine is not a constructor\n业务背景\n更新了 package.json 里面的 elint 版本,重新下载了依赖包后,IDE 就报这个错\n问题解决\n升级 webstorm 到最新版本,或者把 eslint 降级到 5.x 版本\n原因分析\n就是 ide 和 eslint 版本不兼容导致的")]),t._v(" "),i("p",[t._v("作者：冉娃娃 cq\n链接：https://juejin.im/post/5d621341f265da039f12c2b2\n来源：掘金\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。")])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"ide-配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ide-配置","aria-hidden":"true"}},[this._v("#")]),this._v(" ide 配置")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"参考资源"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考资源","aria-hidden":"true"}},[this._v("#")]),this._v(" 参考资源")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"工具介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#工具介绍","aria-hidden":"true"}},[this._v("#")]),this._v(" 工具介绍:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"vscode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vscode","aria-hidden":"true"}},[this._v("#")]),this._v(" vscode")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("https://egoist.moe/2017/12/11/write-better-code-with-eslint-and-prettier/")]),this._v(" "),e("code",[this._v("https://nice.lovejade.cn/zh/article/beautify-vue-by-eslint-and-prettier.html#%E6%B7%BB%E5%8A%A0%E7%BC%96%E8%BE%91%E5%99%A8%E9%85%8D%E7%BD%AE")]),this._v(" "),e("code",[this._v("https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"使用-preitter-结合-eslint-规则来格式化代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用-preitter-结合-eslint-规则来格式化代码","aria-hidden":"true"}},[this._v("#")]),this._v(" 使用 preitter 结合 eslint 规则来格式化代码")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"vscode-使用-eslint-来自动修复代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vscode-使用-eslint-来自动修复代码","aria-hidden":"true"}},[this._v("#")]),this._v(" vscode 使用 eslint 来自动修复代码")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"idea-intellij-配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#idea-intellij-配置","aria-hidden":"true"}},[this._v("#")]),this._v(" idea intellij 配置")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"prettier"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#prettier","aria-hidden":"true"}},[this._v("#")]),this._v(" prettier")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",[e("li",[e("p",[this._v("全局安装 sudo yarn global add prettier")])]),this._v(" "),e("li",[e("p",[this._v("在 intellij 中安装 file watcher 插件 , 并在 intellij 中设置 file watcher")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"reformate-code"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#reformate-code","aria-hidden":"true"}},[this._v("#")]),this._v(" reformate code")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"eslint-结合-fix-eslint-problem"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#eslint-结合-fix-eslint-problem","aria-hidden":"true"}},[this._v("#")]),this._v(" "),e("code",[this._v("eslint")]),this._v(" 结合 "),e("code",[this._v("fix eslint problem")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("在 "),e("code",[this._v("intellij")]),this._v(" 中安装了 "),e("code",[this._v("javascript support")]),this._v(" 默认安装 , 那么它提供了 "),e("code",[this._v("fix eslint problem")]),this._v(" 这个功能")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("可以直接给这个功能设置快捷键, 比如 "),e("code",[this._v("opt + l")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("只要 yarn run start 的时候, eslint 是可以正常工作的, 在开启 intellij 中的 eslint 后 "),e("code",[this._v("fix eslint problem")]),this._v(" 这个功能就可以正常工作")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"prettier-结合-git-在代码提交前调用-prettier-格式化代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#prettier-结合-git-在代码提交前调用-prettier-格式化代码","aria-hidden":"true"}},[this._v("#")]),this._v(" prettier 结合 git 在代码提交前调用 prettier 格式化代码")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("https://facebook.github.io/create-react-app/docs/setting-up-your-editor")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"intellij-中使用-prettier"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#intellij-中使用-prettier","aria-hidden":"true"}},[this._v("#")]),this._v(" intellij 中使用 prettier")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"总结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#总结","aria-hidden":"true"}},[this._v("#")]),this._v(" 总结")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"faq"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#faq","aria-hidden":"true"}},[this._v("#")]),this._v(" faq")])}],!1,null,null,null);e.default=s.exports}}]);