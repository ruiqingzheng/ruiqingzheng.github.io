(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{187:function(e,t,s){"use strict";s.r(t);var a=s(0),r=Object(a.a)({},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[e._m(0),e._v(" "),s("p",[e._v("以 babel-register 来引入 babel , 我们一般用配置文件 + webpack 的方式来使用 babel 比较常见")]),e._v(" "),s("p",[e._v("但是如果不需要 webpack 时最简单的使用 babel 方式, 是 babel-register")]),e._v(" "),s("p",[e._v("它只要我们先安装了 babel 相关的包, 然后配置一下 babel 环境(也是在代码中配置需要用到什么 babel 特性),")]),e._v(" "),s("p",[e._v("然后在使用了 babel 特性的文件中引入 bable , 并引入 js 即可")]),e._v(" "),s("p",[e._v("比如")]),e._v(" "),e._m(1),s("p",[e._v("// 代码中引用 babel")]),e._v(" "),s("p",[e._v("// start.js")]),e._v(" "),e._m(2),s("p",[e._v("// server.js , es6 风格 js 代码")]),e._v(" "),e._m(3),e._v(" "),e._m(4),e._v(" "),s("p",[e._v("配置文件的方式比较常用,常见的配置文件有:")]),e._v(" "),e._m(5),e._v(" "),e._m(6),e._v(" "),e._m(7),e._v(" "),s("p",[e._v("使用 Node API (@babel/core)")]),e._v(" "),s("p",[e._v('require("@babel/core").transform("code", { presets: ["@babel/preset-stage-3"] });')]),e._v(" "),e._m(8),e._v(" "),e._m(9),e._v(" "),s("p",[e._v("另一个使用 Babel 的方法是通过 require 钩子（hook）。require 钩子 将自身绑定到 node 的 require 模块上，并在运行时进行即时编译。 这和 CoffeeScript 的 "),s("a",{attrs:{href:"http://coffeescript.org/v2/annotated-source/register.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("coffee-script/register"),s("OutboundLink")],1),e._v(" 类似。")]),e._v(" "),e._m(10),e._v(" "),e._m(11),s("p",[e._v("// 安装依赖")]),e._v(" "),e._m(12),e._m(13),e._v(" "),s("p",[e._v("需要注意的是 babel 已经把很多 preset 简化@babel/preset-env, 所以一般如果只是需要 es6 相关的支持, 就只需要使用这个 preset 就可以了")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://www.babeljs.cn/docs/presets",target:"_blank",rel:"noopener noreferrer"}},[e._v("什么是 preset"),s("OutboundLink")],1)]),e._v(" "),e._m(14),e._v(" "),e._m(15),e._v(" "),s("p",[e._v("使用 async/await 的时候, 也是需要 polyfill 的")]),e._v(" "),e._m(16),e._v(" "),s("p",[e._v("babel-polyfill is required. You must also install it in order to get async/await working.")])])},[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"babel-register-方式引入-babel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#babel-register-方式引入-babel","aria-hidden":"true"}},[this._v("#")]),this._v(" babel register 方式引入 babel")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-s extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("npm install @babel/core @babel/register --save-dev\nnpm install @babel/preset-env --save-dev\nnpm install --save @babel/polyfill\n")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// register 方式使用babel , 使得语法支持 es6 特性")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'@babel/register'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  presets"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'@babel/preset-env'")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//'stage-3',")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//'latest-node'")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'@babel/polyfill'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'./server'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"使用配置文件的方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用配置文件的方式","aria-hidden":"true"}},[this._v("#")]),this._v(" 使用配置文件的方式")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("使用 CLI (@babel/cli)")]),this._v(" "),t("li",[this._v("使用 API (@babel/core)")]),this._v(" "),t("li",[this._v("@babel/register")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v(".babelrc")]),this._v(" "),t("li",[this._v("babel.config.js")]),this._v(" "),t("li",[this._v("package.json")]),this._v(" "),t("li",[this._v(".babelrc.js")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"使用-cli"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-cli","aria-hidden":"true"}},[this._v("#")]),this._v(" 使用 cli")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("babel --plugins @babel/plugin-transform-arrow-functions script.js")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"babel-register"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#babel-register","aria-hidden":"true"}},[this._v("#")]),this._v(" @babel/register")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("code",[this._v("https://www.babeljs.cn/docs/babel-register")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("@babel/register 使用 Node 的 require() 钩子系统（hook system） 在加载文件时即时编译文件。虽然这在总体上很有帮助，但这意味着 require() 钩子中的代码会导致 "),t("em",[this._v("更多")]),this._v(" 的 require 调用，从而导致依赖循环的情况出现。 以 Babel 为例， 这可能意味着在 Babel 试图编译 用户的文件的过程中，Babel 最终可能会在 "),t("em",[this._v("加载自己时")]),this._v(" 尝试编译自己。\n为了避免这个问题，这个模块明确的禁止重新进入编译， 例如，Babel 自己的编译逻辑明确禁止触发进一步编译任何其他正在运行的文件。 这样做的缺点是如果你想 定义一个插件或 preset，并且这个插件或 preset 本身是实时编译的，这个过程将会 很复杂。\n上述问题的关键在于，你自己的代码首先需要加载插件或 preset。 假定插件或 preset 预先加载了其自身的所有依赖项，你需要 做的是：")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"@babel/register"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// ... });")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"./my-plugin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-s extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("\nnpm install @babel/core @babel/register --save-dev\nnpm install @babel/preset-env --save-dev\nnpm install --save @babel/polyfill\n\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"什么是-preset"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是-preset","aria-hidden":"true"}},[this._v("#")]),this._v(" 什么是 preset")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"faq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#faq","aria-hidden":"true"}},[this._v("#")]),this._v(" FAQ")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("提示错误: "),t("code",[this._v("ReferenceError: regeneratorRuntime is not defined")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("code",[this._v("https://stackoverflow.com/questions/33527653/babel-6-regeneratorruntime-is-not-defined")])])}],!1,null,null,null);t.default=r.exports}}]);