(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{217:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"成功案例页面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#成功案例页面","aria-hidden":"true"}},[t._v("#")]),t._v(" 成功案例页面")]),t._v(" "),a("p",[t._v("数据整理来说也是类似二维数组, 按案例城市列表划分, 每个城市下案例是个列表")]),t._v(" "),a("p",[t._v("在显示上, 我们让城市做一个类似tab的菜单导航放在顶部")]),t._v(" "),a("p",[t._v("内容区域显示每个城市下的案例, 用时间轴改装成的列表来显示")]),t._v(" "),a("p",[t._v("每个案例只有标题和简短说明, 另外配上几个缩略图片, 点击图片可以看大图")]),t._v(" "),a("p",[t._v("暂时不做每个案例的详情页面, 因为数据不全拿不到数据, 而且时间有限, 这个可以以后改进")]),t._v(" "),a("h2",{attrs:{id:"caseregionsheader-vue"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#caseregionsheader-vue","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("CaseRegionsHeader.vue")])]),t._v(" "),a("p",[t._v("用的vux swiper来做这个头部地区显示 , 每个swiper-item 里面放3个地区菜单")]),t._v(" "),a("p",[t._v("于是把获取到的数据需要分成3个一组")]),t._v(" "),a("p",[t._v("数据的获取和分组都放在store里面, 虽然页面分成了头部和body两个部分,而且两个部分的某些数据是关联的, 比如点击头部菜单, 需要获取对应的 body内容")]),t._v(" "),a("p",[t._v("那么数据传递原本是需要事件来处理, 或者是父子组件属性传递数据, 但用了store数据的传递就不是问题了, 菜单中点击触发后, 获取到的数据, body列表可以直接去store中获取即可")]),t._v(" "),a("p",[t._v("其他的就是布局和样式了")]),t._v(" "),a("h2",{attrs:{id:"body部分"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#body部分","aria-hidden":"true"}},[t._v("#")]),t._v(" body部分")]),t._v(" "),a("p",[t._v("body对应的是 "),a("code",[t._v("CaseList.vue")]),t._v(" 组件")]),t._v(" "),a("p",[t._v("设计是将"),a("code",[t._v("time-line")]),t._v("的设计, 有css-demo")]),t._v(" "),a("p",[t._v("数据的获取 ,CaseList 中的数据, 实际都是在"),a("code",[t._v("CaseRegionsHeader")]),t._v(" mounted 时候来抓数据 , 因为用的是store来获取数据")]),t._v(" "),a("p",[t._v("所以"),a("code",[t._v("CaseList")]),t._v("中直接使用这些数据即可, 在初始化的时候, 我们需要获取地区列表 (提供给头部菜单使用), 然后获取第一个地区的case数据(提供给列表使用)")]),t._v(" "),a("p",[t._v("// store "),a("code",[t._v("vcase.js")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 初始化获取地区列表, 然后获取第一个地区的case数据")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initCases_action")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("commit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" regions_response "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCaseRegionsApi")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"set_caseRegions"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" regions_response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" default_region "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" regions_response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" cases_response "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRegionCasesApi")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" default_region"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"set_regionCases"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cases_response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"initCases_action , error: "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("当头部菜单被点击, 需要切换菜单样式, 于是对原有的数据, 需要加上属性"),a("code",[t._v("selected")])]),t._v(" "),a("p",[t._v("而且, 每当点击菜单的时候都需要去获取该region下的cases数据这些直接看代码.")]),t._v(" "),a("p",[t._v("另外, time-line样式中, 图片点击后展示图片, 用的是vux previewer , 它需要的数据中必须有src属性来显示previewer")]),t._v(" "),a("p",[t._v("于是store中的getter对数据"),a("code",[t._v("region_cases")]),t._v(" 加上src属性.")]),t._v(" "),a("h2",{attrs:{id:"tips"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tips","aria-hidden":"true"}},[t._v("#")]),t._v(" Tips")]),t._v(" "),a("h2",{attrs:{id:"vue-动态样式class"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-动态样式class","aria-hidden":"true"}},[t._v("#")]),t._v(" vue 动态样式class")]),t._v(" "),a("p",[t._v("可以使用v-bind直接把元素的class设置为对象 ,  对象的key 就是样式class , 值是true, false控制是否添加该class")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"static"')]),t._v("\n     v"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("bind"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"{ active: isActive, 'text-danger': hasError }\"")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\ndata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  isActive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  hasError"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n结果渲染为：\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"static active"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("h2",{attrs:{id:"神奇的z-index"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#神奇的z-index","aria-hidden":"true"}},[t._v("#")]),t._v(" 神奇的z-index")]),t._v(" "),a("p",[a("code",[t._v("https://blog.csdn.net/lihefei_coder/article/details/72869065")])])])}],!1,null,null,null);s.default=n.exports}}]);