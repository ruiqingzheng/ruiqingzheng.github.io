(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{230:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"_08-前端-vuetify-重构3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_08-前端-vuetify-重构3","aria-hidden":"true"}},[t._v("#")]),t._v(" 08_前端_vuetify_重构3")]),t._v(" "),s("h2",{attrs:{id:"产品详情页面"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#产品详情页面","aria-hidden":"true"}},[t._v("#")]),t._v(" 产品详情页面")]),t._v(" "),s("h2",{attrs:{id:"内容header"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#内容header","aria-hidden":"true"}},[t._v("#")]),t._v(" 内容header")]),t._v(" "),s("p",[t._v("路由, 产品详情, 依然显示在HOME 组件的router-view里面")]),t._v(" "),s("p",[t._v("且产品详情的头部 和 分类产品列表的头部应该是一致的, 因此提取这部分为"),s("code",[t._v("home-content-header.vue")])]),t._v(" "),s("p",[t._v("它实际上是包括有  "),s("code",[t._v("错误警示框")]),t._v(" , "),s("code",[t._v("标题和分享")]),t._v(" , "),s("code",[t._v("loading进度条和分割线")]),t._v(" 这3部分组成 , 我们从原本的"),s("code",[t._v("cat_products-cards.vue")]),t._v(" 提取出来")]),t._v(" "),s("p",[t._v("封装为组件"),s("code",[t._v("home-content-header")]),t._v("  , 且设置属性 "),s("code",[t._v("error")]),t._v(" , "),s("code",[t._v("title")]),t._v(", "),s("code",[t._v("loading")])]),t._v(" "),s("p",[t._v("另外就是对"),s("code",[t._v("错误警示框")]),t._v(" 的关闭事件, 需要再次"),s("code",[t._v("$emit")]),t._v(" 封装 , 详细的直接看代码, 完成后, 在组件中使用")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("HomeContentHeader")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":error")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("cat_products.error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":title")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("cat_products.cat_products.name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":loading")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("cat_products.loading"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@closeErrorAlert")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("onCloseErrorAlert"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("HomeContentHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("这样, 我们在product 组件中 , 也就可以使用该 头部组件了")]),t._v(" "),s("h2",{attrs:{id:"商品详情组件-product-vtify-vue"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#商品详情组件-product-vtify-vue","aria-hidden":"true"}},[t._v("#")]),t._v(" 商品详情组件 product_vtify.vue")]),t._v(" "),s("h2",{attrs:{id:"准备数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#准备数据","aria-hidden":"true"}},[t._v("#")]),t._v(" 准备数据")]),t._v(" "),s("p",[t._v("以前的产品数据和package价格数据是分开加载的, AAA站点就是分开加载,")]),t._v(" "),s("p",[t._v("但实际上, 我们需要让这两个数据一起加载,  功能不同, 表不同, 可以写在store的两个不同的action里面")]),t._v(" "),s("p",[t._v("但是在数据加载的时候, 我们应该在 get_product 详情的时候, dispatch 获取 package价格action")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("      context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'getPackagesAction'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("并且, 在返回数据的时候,  在getter里面进行数据修正返回")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("product_getter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'product'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("product"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'package'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("packages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'loaded'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("productLoaded "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("packagesLoaded "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'loading'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("productLoading "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("packageLoading "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("然后, 在这个基础上, 还可以加上error 字段, 那么数据就完整了, 这样的数据就可以交给组件使用了")])])}],!1,null,null,null);a.default=e.exports}}]);